{"version":3,"sources":["webpack:///src/views/management/Rollcall.vue","webpack:///./src/views/management/Rollcall.vue?c1a6","webpack:///./src/views/management/Rollcall.vue"],"names":["Rollcall","data","dialogTableVisible","tabledata","xqdata","zidongtime","value","Company","options","label","created","_this","this","$ajax","post","then","response","forEach","element","type","unit","beigintime","cycle","select","methods","_this2","consoletim","_this3","date","Date","setTime","month","getMonth","strDate","getDate","currentdate","getFullYear","getHours","getMinutes","getSeconds","console","log","$message","message","error","warning","Manual","_this4","handleClick","id","_this5","management_Rollcall","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","margin-right","width","attrs","editable","clearable","placeholder","model","callback","$$v","expression","_l","item","key","label1","margin-left","on","click","margin-top","height","border","align","prop","scopedSlots","_u","fn","scope","$event","row","slot","title","visible","update:visible","property","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/24.7883e8cae353ad99e9f1.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"v-step1\">\r\n      <span>设置开始时间：</span>\r\n      <el-date-picker\r\n        :editable=\"false\"\r\n        :clearable=\"false\"\r\n        style=\"margin-right:20px;width:195px;\"\r\n        v-model=\"zidongtime\"\r\n        type=\"datetime\"\r\n        placeholder=\"选择日期时间\"\r\n      ></el-date-picker>\r\n      <span>设置点名周期：</span>\r\n      <el-input style=\"width:80px;\" v-model=\"value\" placeholder=\"请输入数值\"></el-input>\r\n      <el-select v-model=\"Company\" style=\"width:86px;\" placeholder=\"单位\">\r\n        <el-option\r\n          v-for=\"item in options\"\r\n          :key=\"item.label1\"\r\n          :label=\"item.label\"\r\n          :value=\"item.value\"\r\n        ></el-option>\r\n      </el-select>\r\n      <el-button style=\"margin-left:10px;\" type=\"primary\" @click=\"consoletim\">确定</el-button>\r\n      <el-button style=\"margin-left:10px;\" type=\"primary\" @click=\"Manual\">手动点名</el-button>\r\n    </div>\r\n    <el-table\r\n      class=\"v-step2\"\r\n      :data=\"tabledata\"\r\n      height=\"662\"\r\n      border\r\n      style=\"width: 785px;margin-top:20px;\"\r\n    >\r\n      <el-table-column align=\"center\" prop=\"begintime\" label=\"开始时间\"></el-table-column>\r\n      <el-table-column align=\"center\" prop=\"endtime\" label=\"结束时间\"></el-table-column>\r\n      <el-table-column align=\"center\" prop=\"abnormalnum\" label=\"异常个数\"></el-table-column>\r\n      <el-table-column align=\"center\">\r\n        <template slot=\"header\">\r\n          <el-button type=\"text\" @click=\"select\">刷新</el-button>\r\n        </template>\r\n        <template slot-scope=\"scope\">\r\n          <el-button @click=\"handleClick(scope.row.id)\" type=\"text\">详情</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 详情表格 -->\r\n    <el-dialog title=\"详情\" :visible.sync=\"dialogTableVisible\">\r\n      <el-table height=\"241\" border :data=\"xqdata\">\r\n        <el-table-column align=\"center\" property=\"dataname\" label=\"姓名\" width=\"150\"></el-table-column>\r\n        <el-table-column align=\"center\" property=\"datacode\" label=\"住院号\" width=\"200\"></el-table-column>\r\n        <el-table-column align=\"center\" property=\"abnormal\" label=\"异常码\"></el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogTableVisible: false,\r\n      tabledata: [{}],\r\n      xqdata: [{}],\r\n      zidongtime: \"\",\r\n      value: \"\",\r\n      Company: \"\",\r\n      options: [\r\n        {\r\n          label: \"分钟\",\r\n          value: \"minute\",\r\n        },\r\n        {\r\n          label: \"小时\",\r\n          value: \"hour\",\r\n        },\r\n        {\r\n          label: \"天\",\r\n          value: \"day\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    this.$ajax\r\n      .post(\r\n        process.env.API_HOST + \"/selfExamination/getSelfExaminationTasksettings\"\r\n      )\r\n      .then((response) => {\r\n        response.data.forEach((element) => {\r\n          if (element.type == \"person\") {\r\n            this.Company = element.unit;\r\n            this.zidongtime = element.beigintime;\r\n            this.value = element.cycle;\r\n          }\r\n        });\r\n      });\r\n\r\n    // 获取人员自检数据\r\n    this.select();\r\n  },\r\n  methods: {\r\n    // 获取人员自检数据\r\n    select() {\r\n      this.$ajax\r\n        .post(\r\n          process.env.API_HOST + \"/selfExamination/getPersonSelfExaminationP\"\r\n        )\r\n        .then((response) => {\r\n          this.tabledata = response.data;\r\n        });\r\n    },\r\n    consoletim() {\r\n      if (this.value != \"\") {\r\n        var seperator1 = \"-\";\r\n        var seperator2 = \":\";\r\n        var date = new Date();\r\n        date.setTime(this.zidongtime);\r\n        var month = date.getMonth() + 1;\r\n        var strDate = date.getDate();\r\n        if (month >= 1 && month <= 9) {\r\n          month = \"0\" + month;\r\n        }\r\n        if (strDate >= 0 && strDate <= 9) {\r\n          strDate = \"0\" + strDate;\r\n        }\r\n        var currentdate =\r\n          date.getFullYear() +\r\n          seperator1 +\r\n          month +\r\n          seperator1 +\r\n          strDate +\r\n          \" \" +\r\n          date.getHours() +\r\n          seperator2 +\r\n          date.getMinutes() +\r\n          seperator2 +\r\n          date.getSeconds();\r\n        console.log(this.zidongtime, this.value, this.Company);\r\n\r\n        this.$ajax\r\n          .post(\r\n            process.env.API_HOST + \"/selfExamination/insertSelfExamination\",\r\n            `beginTime=${currentdate}&cycle=${this.value}&unit=${this.Company}&type=person`\r\n          )\r\n          .then((response) => {\r\n            if (response.data == \"success\") {\r\n              this.$message({\r\n                message: \"设置成功\",\r\n                type: \"success\",\r\n              });\r\n            } else {\r\n              this.$message.error(\"设置失败\");\r\n            }\r\n            console.log(response.data);\r\n          });\r\n      } else {\r\n        this.$message.warning(\"请输入完整！\");\r\n      }\r\n    },\r\n    Manual() {\r\n      // 设备手动检查\r\n      this.$ajax\r\n        .post(\r\n          process.env.API_HOST + \"/selfExamination/getPersonSelfExamination\"\r\n        )\r\n        .then((response) => {\r\n          if (response.data == \"success\") {\r\n            this.$message({\r\n              message: \"正在检查，请稍后...\",\r\n              type: \"success\",\r\n            });\r\n            this.select();\r\n          } else {\r\n            this.$message.error(\"检查失败\");\r\n          }\r\n        });\r\n    },\r\n    handleClick(id) {\r\n      // 通过pid查询自检问题设备信息\r\n      this.$ajax\r\n        .post(\r\n          process.env.API_HOST + \"/selfExamination/getSelfExaminationSByPId\",\r\n          `pid=${id}`\r\n        )\r\n        .then((response) => {\r\n          this.xqdata = response.data;\r\n        });\r\n      this.dialogTableVisible = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/management/Rollcall.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"v-step1\"},[_c('span',[_vm._v(\"设置开始时间：\")]),_vm._v(\" \"),_c('el-date-picker',{staticStyle:{\"margin-right\":\"20px\",\"width\":\"195px\"},attrs:{\"editable\":false,\"clearable\":false,\"type\":\"datetime\",\"placeholder\":\"选择日期时间\"},model:{value:(_vm.zidongtime),callback:function ($$v) {_vm.zidongtime=$$v},expression:\"zidongtime\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"设置点名周期：\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"80px\"},attrs:{\"placeholder\":\"请输入数值\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"86px\"},attrs:{\"placeholder\":\"单位\"},model:{value:(_vm.Company),callback:function ($$v) {_vm.Company=$$v},expression:\"Company\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.label1,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.consoletim}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.Manual}},[_vm._v(\"手动点名\")])],1),_vm._v(\" \"),_c('el-table',{staticClass:\"v-step2\",staticStyle:{\"width\":\"785px\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.tabledata,\"height\":\"662\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"begintime\",\"label\":\"开始时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"endtime\",\"label\":\"结束时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"abnormalnum\",\"label\":\"异常个数\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleClick(scope.row.id)}}},[_vm._v(\"详情\")])]}}])},[_c('template',{slot:\"header\"},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.select}},[_vm._v(\"刷新\")])],1)],2)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"详情\",\"visible\":_vm.dialogTableVisible},on:{\"update:visible\":function($event){_vm.dialogTableVisible=$event}}},[_c('el-table',{attrs:{\"height\":\"241\",\"border\":\"\",\"data\":_vm.xqdata}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"property\":\"dataname\",\"label\":\"姓名\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"property\":\"datacode\",\"label\":\"住院号\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"property\":\"abnormal\",\"label\":\"异常码\"}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51e48c4c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/management/Rollcall.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-51e48c4c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Rollcall.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Rollcall.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Rollcall.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51e48c4c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Rollcall.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-51e48c4c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/management/Rollcall.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
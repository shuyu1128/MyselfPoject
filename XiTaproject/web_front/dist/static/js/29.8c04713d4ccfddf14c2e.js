webpackJsonp([29],{"5HRJ":function(e,t){},re80:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),r=a.n(i),l={data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},valueData:"",valueInput:"",updataForm:{classificationid:""},createdtime:"",valueTime:"",dialogVisible:!1,currentPage:1,pagesize:10,userList:[],value:[],ruleForm:{classificationid:"",materialname:"",materialid:"",norms:"",factory:"",nickname:"",nursingid:"",amount:""},rules:{classificationid:[{required:!0,message:"请选择物品种类",trigger:"blur"}],materialname:[{required:!0,message:"请选择物品种类",trigger:"blur"}],norms:[{required:!0,message:"请选择物品种类",trigger:"blur"}],materialid:[{required:!0,message:"请选择物品种类",trigger:"blur"}],nursingid:[{required:!0,message:"请输入领取人姓名",trigger:"blur"}]},tableData:[],getMaterialClassificationListData:[],getMaterialNameListData:[],getMaterialNormsListData:[],getMaterialFactoryListData:[],getnursingidData:[]}},methods:{getMaterialClassificationList:function(){var e=this;this.$http.getMaterialClassificationList({classificationname:""}).then(function(t){e.getMaterialClassificationListData=t.data})},changeClassification:function(e){var t=this;this.$http.getMaterialNameList({classificationid:e}).then(function(e){t.getMaterialNameListData=e.data,t.ruleForm.materialname="",t.ruleForm.norms="",t.ruleForm.materialid="",t.ruleForm.amount=""})},changeMaterial:function(e){var t=this;this.$http.getMaterialNormsList({materialname:e,classificationid:this.ruleForm.classificationid}).then(function(e){t.getMaterialNormsListData=e.data,t.ruleForm.norms="",t.ruleForm.materialid="",t.ruleForm.amount=""})},changegetMaterialNormsList:function(e){var t=this;this.$http.getMaterialFactoryList({materialname:this.ruleForm.materialname,classificationid:this.ruleForm.classificationid,norms:e}).then(function(e){t.getMaterialFactoryListData=e.data,t.ruleForm.materialid="",t.ruleForm.amount=""})},getNursingUserList:function(){var e=this;this.$ajax.post("/sysNursingUser/getNursingUserList","search="+r()({nickname:""})).then(function(t){e.getnursingidData=t.data})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$http.insertMaterialDelivery({materialid:t.ruleForm.materialid,nursingid:t.ruleForm.nursingid,userid:t.$store.state.token,amount:t.ruleForm.amount}).then(function(e){"success"==e.data.state?(t.$message({message:e.data.msg,type:"success"}),t.dialogVisible=!1,t.handleUserList()):t.$message.error(e.data.msg)})})},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该出库记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.deleteMaterialDeliveryById({id:e,userid:t.$store.state.token}).then(function(e){"success"==e.data.state?(t.$message({type:"success",message:e.data.msg}),t.handleUserList()):t.$message.error(e.data.msg)})})},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},handleUserList:function(){var e=this;this.valueData||(this.valueData=["",""]);var t={classificationid:this.updataForm.classificationid,materialname:this.valueInput,begintime:this.valueData[0],endtime:this.valueData[1]};this.$http.getMaterialDeliveryList(t).then(function(t){e.handleCurrentChange(1),e.userList=t.data,e.userList.forEach(function(e,t){e.idnum=t+1})})}},created:function(){this.handleUserList(),this.getMaterialClassificationList(),this.getNursingUserList()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"WarehouseManagement-box"}},[a("div",{staticClass:"WarehouseManagement-header"},[a("div",{staticClass:"WarehouseManagement-header-left"},[a("el-input",{staticClass:"WarehouseManagement-header-input",attrs:{placeholder:"输入物品名称"},model:{value:e.valueInput,callback:function(t){e.valueInput=t},expression:"valueInput"}}),e._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"请选择开始日期","end-placeholder":"请选择结束日期","picker-options":e.pickerOptions},model:{value:e.valueData,callback:function(t){e.valueData=t},expression:"valueData"}}),e._v(" "),a("el-select",{staticClass:"selectel-select",attrs:{placeholder:"全部",clearable:""},model:{value:e.updataForm.classificationid,callback:function(t){e.$set(e.updataForm,"classificationid",t)},expression:"updataForm.classificationid"}},e._l(e.getMaterialClassificationListData,function(e){return a("el-option",{key:e.id,attrs:{label:e.classificationname,value:e.id}})}),1)],1),e._v(" "),a("div",{staticClass:"WarehouseManagement-header-right"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleUserList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("出库")]),e._v(" "),a("div",[a("el-dialog",{staticStyle:{"margin-bottom":"0"},attrs:{title:"出库单",visible:e.dialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"80px","label-position":"top",model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"物品种类",prop:"classificationid"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入物品种类"},on:{change:e.changeClassification},model:{value:e.ruleForm.classificationid,callback:function(t){e.$set(e.ruleForm,"classificationid",t)},expression:"ruleForm.classificationid"}},e._l(e.getMaterialClassificationListData,function(e){return a("el-option",{key:e.id,attrs:{label:e.classificationname,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"物品名称",prop:"materialname"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入物品名称"},on:{change:e.changeMaterial},model:{value:e.ruleForm.materialname,callback:function(t){e.$set(e.ruleForm,"materialname",t)},expression:"ruleForm.materialname"}},e._l(e.getMaterialNameListData,function(e){return a("el-option",{key:e.materialname,attrs:{label:e.materialname,value:e.materialname}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规格",prop:"norms"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入物品规格"},on:{change:e.changegetMaterialNormsList},model:{value:e.ruleForm.norms,callback:function(t){e.$set(e.ruleForm,"norms",t)},expression:"ruleForm.norms"}},e._l(e.getMaterialNormsListData,function(e){return a("el-option",{key:e.norms,attrs:{label:e.norms,value:e.norms}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"生产厂家/品牌",prop:"materialid"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入生产厂家"},model:{value:e.ruleForm.materialid,callback:function(t){e.$set(e.ruleForm,"materialid",t)},expression:"ruleForm.materialid"}},e._l(e.getMaterialFactoryListData,function(e){return a("el-option",{key:e.materialid,attrs:{label:e.factory,value:e.materialid}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"领取人",prop:"nursingid"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入领取人"},model:{value:e.ruleForm.nursingid,callback:function(t){e.$set(e.ruleForm,"nursingid",t)},expression:"ruleForm.nursingid"}},e._l(e.getnursingidData,function(e){return a("el-option",{key:e.id,attrs:{label:e.nickname,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"amount",rules:[{required:!0,message:"数量不能为空"},{type:"number",message:"数量必须是数字"}]}},[a("el-input",{attrs:{placeholder:"请输入物品数量",clearable:"",autocomplete:"off"},model:{value:e.ruleForm.amount,callback:function(t){e.$set(e.ruleForm,"amount",e._n(t))},expression:"ruleForm.amount"}})],1)],1),e._v(" "),a("span",{staticClass:"WarehouseManagement-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)],1)]),e._v(" "),a("div",{staticClass:"WarehouseManagement-content"},[a("el-table",{staticClass:"form-style",attrs:{data:e.userList.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),border:"",height:"683"}},[a("el-table-column",{attrs:{prop:"createdtime",label:"时间",width:"200",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialname",label:"物品名称",width:"300",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"classificationname",label:"物品分类",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"norms",label:"规格",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"数量",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"factory",label:"生产厂家/品牌",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nursingname",label:"领取人",align:"center",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.deleteRow(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"WarehouseManagement-block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,layout:"total, prev, pager, next, jumper",total:e.userList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var s=a("C7Lr")(l,n,!1,function(e){a("5HRJ")},null,null);t.default=s.exports}});
//# sourceMappingURL=29.8c04713d4ccfddf14c2e.js.map
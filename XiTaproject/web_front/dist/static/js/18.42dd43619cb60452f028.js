webpackJsonp([18],{"1PWx":function(t,e){},QQWP:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("3cXf"),i=o.n(n),s=(o("aiqZ"),o("r+cd")),l=o("2cm+");s.register("modules/imageDrop",l.a);var r={name:"App",data:function(){return{treedata:[],dialogFormVisible:!1,json:{title:"",newtype:""},content:"",type:[{value:"notice",label:"院内公告"},{value:"news",label:"院内新闻"}],editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean","link"]]},placeholder:"请输入正文"}}},computed:{editor:function(){return this.$refs.myQuillEditor.quill},time:function(){var t=new Date;return t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日"}},mounted:function(){},methods:{onEditorReady:function(t){},onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){},saveHtml:function(){var t=this;""==this.json.title?this.$alert("请输入文章标题","警告",{confirmButtonText:"确定",callback:function(t){}}):""==this.json.newtype?this.$alert("请选择文章类型","警告",{confirmButtonText:"确定",callback:function(t){}}):""==this.content?this.$alert("请输入文章内容","警告",{confirmButtonText:"确定",callback:function(t){}}):this.$ajax.post("/dept/getDeptrightByUser","userid="+this.$store.state.token).then(function(e){t.treedata=e.data,t.dialogFormVisible=!0})},sureSend:function(){for(var t=this,e=[],o=0;o<this.$refs.tree.getCheckedNodes().length;o++)"p"==this.$refs.tree.getCheckedNodes()[o].type&&(console.log("0"!=this.$refs.tree.getCheckedNodes()[o]),e.push(this.$refs.tree.getCheckedNodes()[o].id));0!==e.length?this.$ajax.post("/news/insertNews","json="+i()(this.json)+"&userid="+this.$store.getters.token+"&userids="+i()(e)+"&content="+encodeURI(this.content)).then(function(e){"success"==e.data?(t.$message({message:"发送成功",type:"success"}),t.json={title:"",newtype:""},t.content="",t.dialogFormVisible=!1):t.$message.error("发送失败"),console.log(e.data)}):this.$alert("请选中带有人员的部门！","警告",{confirmButtonText:"确定",callback:function(t){}})}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"notice"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选择发布公告区域",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-tree",{ref:"tree",attrs:{data:t.treedata,"show-checkbox":"","node-key":"id","highlight-current":""}}),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.sureSend}},[t._v("确 定")])],1)],1),t._v(" "),o("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[o("el-col",{attrs:{span:20}},[o("el-input",{staticClass:"Notice-step1",staticStyle:{width:"100%"},attrs:{placeholder:"请输入标题"},model:{value:t.json.title,callback:function(e){t.$set(t.json,"title",e)},expression:"json.title"}})],1),t._v(" "),o("el-col",{attrs:{span:4}},[o("el-select",{staticClass:"Notice-step2",staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:t.json.newtype,callback:function(e){t.$set(t.json,"newtype",e)},expression:"json.newtype"}},t._l(t.type,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),o("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[o("h3",{staticClass:"time-center"},[t._v(t._s(t.time))])])],1),t._v(" "),o("quill-editor",{ref:"myQuillEditor",staticClass:"Notice-step3",staticStyle:{height:"75%"},attrs:{options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},change:function(e){return t.onEditorChange(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),o("el-button",{staticClass:"sendBtn Notice-step4",attrs:{type:"primary"},on:{click:t.saveHtml}},[t._v("发送")])],1)},staticRenderFns:[]};var c=o("C7Lr")(r,a,!1,function(t){o("1PWx"),o("zBdb")},"data-v-c3e9d338",null);e.default=c.exports},zBdb:function(t,e){}});
//# sourceMappingURL=18.42dd43619cb60452f028.js.map
webpackJsonp([27],{JDJs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{labelPosition:"top",changeClassificationID:"",dialogVisible:!1,dialogFormvisible:!1,dialogEditvisible:!1,dialogChangevisible:!1,gridData:[],tableData:[],classificationname:"",ruleForm:{classificationid:"",materialname:"",norms:"",price:"",factory:"",userid:this.$store.state.token},updataForm:{classificationid:"",materialname:"",norms:"",price:"",factory:""},rules:{classificationname:[{required:!0,message:"请输入要添加的类目名",trigger:"blur"}],classificationid:[{required:!0,message:"请输入物品种类",trigger:"blur"}],materialname:[{required:!0,message:"请输入物品名称",trigger:"blur"}],norms:[{required:!0,message:"请输入物品规格",trigger:"blur"}],price:{required:!0,message:"请输入物品价格",trigger:"blur"},factory:{required:!0,message:"请输入出产厂家",trigger:"blur"}},currentPage:1,pagesize:10,userList:[],value:[],numberValidateForm:{number:""},getMaterialFormData:{materialname:"",classificationid:""}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http.insertMaterialInformation(e.ruleForm).then(function(t){"success"==t.data.state?(e.handleUserList(),e.$message({message:"上传成功！",type:"success"}),e.dialogFormvisible=!1,e.ruleForm={classificationid:"",materialname:"",norms:"",price:"",factory:"",userid:e.$store.state.token}):e.$message.error(t.data.msg)})})},insertMaterialClassification:function(){var t=this;this.$http.getMaterialClassificationList({classificationname:""}).then(function(e){t.gridData=e.data})},changeEdit:function(){var t=this;this.dialogEditvisible=!1,this.$http.updateMaterialClassification({userid:this.$store.state.token,id:this.changeClassificationID,classificationname:this.classificationname}).then(function(e){"success"==e.data.state?""!==t.classificationname?(t.$message({type:"success",message:e.data.msg}),t.$http.getMaterialClassificationList({classificationname:""}).then(function(e){t.gridData=e.data,t.classificationname=""})):t.$message.error("类名不能为空!"):t.$message.error(e.data.msg)})},deletRow:function(t){var e=this;this.$confirm("此操作将永久删除该入库记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.deleteMaterialClassificationById({id:t}).then(function(t){"success"==t.data.state?(e.$message({message:t.data.msg,type:"success"}),e.$http.getMaterialClassificationList({classificationname:""}).then(function(t){e.gridData=t.data,e.classificationname=""})):e.$message.error(t.data.msg)})})},insertMat:function(){var t=this;this.$confirm("此操作将添加该类目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""!==t.classificationname?t.$http.insertMaterialClassification({classificationname:t.classificationname,userid:t.$store.state.token}).then(function(e){"success"==e.data.state?(t.$http.getMaterialClassificationList({classificationname:""}).then(function(e){t.gridData=e.data,t.classificationname=""}),t.$message({message:e.data.msg,type:"success"})):t.$message.error(e.data.msg)}):t.$message.error("类目名不能为空")})},edititem:function(){var t=this;this.$confirm("此操作将修改该物品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.updataForm.userid=t.$store.state.token,t.$http.updateMaterialInformation(t.updataForm).then(function(e){"success"==e.data.state?(t.$message({message:e.data.msg,type:"success"}),t.dialogChangevisible=!1,t.handleUserList(),t.classificationname="",t.ruleForm.classificationid="",t.ruleForm.materialname="",t.ruleForm.norms="",t.ruleForm.price="",t.ruleForm.factory=""):t.$message.error(e.data.msg)})})},delectitem:function(t){var e=this;this.$confirm("此操作将永久删除该入库记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.deleteMaterialInformationById({id:t,userid:e.$store.state.token}).then(function(t){"success"==t.data.state?(e.$message({message:t.data.msg,type:"success"}),e.handleUserList()):e.$message.error(t.data.msg)})})},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=t},handleUserList:function(){var t=this;this.$http.getMaterialInformationList(this.getMaterialFormData).then(function(e){t.handleCurrentChange(1),t.userList=e.data,t.userList.forEach(function(t,e){t.idnum=e+1})})}},created:function(){this.handleUserList(),this.insertMaterialClassification()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"categoryManagement"}},[a("div",{staticClass:"categoryManagementheader"},[a("div",{staticClass:"categoryManagementheader-left"},[a("el-input",{staticClass:"categoryManagementheaderinput",attrs:{placeholder:"请输入关键字",size:"normal",clearable:""},model:{value:t.getMaterialFormData.materialname,callback:function(e){t.$set(t.getMaterialFormData,"materialname",e)},expression:"getMaterialFormData.materialname"}}),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.getMaterialFormData.classificationid,callback:function(e){t.$set(t.getMaterialFormData,"classificationid",e)},expression:"getMaterialFormData.classificationid"}},t._l(t.gridData,function(t){return a("el-option",{key:t.id,attrs:{label:t.classificationname,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"categoryManagementheader-right"},[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"default"},on:{click:t.handleUserList}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"default"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("分类管理")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"default"},on:{click:function(e){t.dialogFormvisible=!0}}},[t._v("添加物品")]),t._v(" "),a("div",[a("el-dialog",{staticStyle:{"margin-bottom":"0"},attrs:{title:"",visible:t.dialogVisible,width:"30%","close-on-click-modal":!1,id:"categoryManagementForm"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules}},[a("el-form-item",[a("span",[t._v("类目名称")]),t._v(" "),a("el-input",{staticClass:"diaInput",staticStyle:{"margin-left":"20px","margin-top":"20px"},attrs:{placeholder:"请输入要添加的类目",size:"normal",clearable:""},model:{value:t.ruleForm.classificationname,callback:function(e){t.$set(t.ruleForm,"classificationname",e)},expression:"ruleForm.classificationname"}}),t._v(" "),a("el-button",{staticClass:"diaBtn",attrs:{type:"primary",size:"default"},on:{click:t.insertMat}},[t._v("添加")])],1),t._v(" "),a("el-form-item",[a("el-table",{attrs:{data:t.gridData,border:"","header-cell-style":{background:"#f2f2f2"}}},[a("el-table-column",{attrs:{property:"classificationname",label:"物品类目",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"editbtn1",attrs:{type:"primary",size:"small"},on:{click:function(a){t.changeClassificationID=e.row.id,t.dialogEditvisible=!0}}},[t._v("编辑")]),t._v(" "),a("div",[a("el-dialog",{attrs:{title:"",visible:t.dialogEditvisible,width:"30%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogEditvisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-input",{staticStyle:{"margin-top":"30px"},attrs:{placeholder:"请输入新的类名",size:"normal",clearable:""},model:{value:t.ruleForm.classificationname,callback:function(e){t.$set(t.ruleForm,"classificationname",e)},expression:"ruleForm.classificationname"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogEditvisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.changeEdit()}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("el-button",{staticClass:"editbtn2",attrs:{type:"primary",size:"small"},on:{click:function(a){return t.deletRow(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1)],1)],1),t._v(" "),a("div",[a("el-dialog",{attrs:{title:"添加物品",visible:t.dialogFormvisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormvisible=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"物品种类",prop:"classificationid"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择物品种类",filterable:""},model:{value:t.ruleForm.classificationid,callback:function(e){t.$set(t.ruleForm,"classificationid",e)},expression:"ruleForm.classificationid"}},t._l(t.gridData,function(t){return a("el-option",{key:t.id,attrs:{label:t.classificationname,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"物品名称",prop:"materialname"}},[a("el-input",{attrs:{placeholder:"请输入物品名称"},model:{value:t.ruleForm.materialname,callback:function(e){t.$set(t.ruleForm,"materialname",e)},expression:"ruleForm.materialname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",prop:"norms"}},[a("el-input",{attrs:{placeholder:"请输入物品规格"},model:{value:t.ruleForm.norms,callback:function(e){t.$set(t.ruleForm,"norms",e)},expression:"ruleForm.norms"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销售价",prop:"price"}},[a("el-input",{attrs:{placeholder:"请输入物品销售价"},model:{value:t.ruleForm.price,callback:function(e){t.$set(t.ruleForm,"price",e)},expression:"ruleForm.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"生产厂家/品牌",prop:"factory"}},[a("el-input",{attrs:{placeholder:"请输入生产厂家"},model:{value:t.ruleForm.factory,callback:function(e){t.$set(t.ruleForm,"factory",e)},expression:"ruleForm.factory"}})],1)],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormvisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("div",[a("el-dialog",{attrs:{title:"",visible:t.dialogChangevisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogChangevisible=e}}},[a("el-form",{ref:"updataForm",attrs:{model:t.updataForm,rules:t.rules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"物品种类",prop:"classificationid"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"输入关键字",filterable:""},model:{value:t.updataForm.classificationid,callback:function(e){t.$set(t.updataForm,"classificationid",e)},expression:"updataForm.classificationid"}},t._l(t.gridData,function(t){return a("el-option",{key:t.id,attrs:{label:t.classificationname,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"物品名称",prop:"materialname"}},[a("el-input",{model:{value:t.updataForm.materialname,callback:function(e){t.$set(t.updataForm,"materialname",e)},expression:"updataForm.materialname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",prop:"norms"}},[a("el-input",{model:{value:t.updataForm.norms,callback:function(e){t.$set(t.updataForm,"norms",e)},expression:"updataForm.norms"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销售价",prop:"price"}},[a("el-input",{model:{value:t.updataForm.price,callback:function(e){t.$set(t.updataForm,"price",e)},expression:"updataForm.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"生产厂家/品牌",prop:"factory"}},[a("el-input",{model:{value:t.updataForm.factory,callback:function(e){t.$set(t.updataForm,"factory",e)},expression:"updataForm.factory"}})],1)],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogChangevisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.edititem}},[t._v("确 定")])],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"categoryManagementcontent"},[a("el-table",{staticStyle:{height:"680px"},attrs:{data:t.userList.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),border:""}},[a("el-table-column",{attrs:{prop:"idnum",label:"序号",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"materialname",label:"物品名称",width:"300",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"classificationname",label:"物品分类",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"norms",label:"规格",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"销售价",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"factory",label:"生产厂家/品牌",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updataForm=JSON.parse(JSON.stringify(e.row)),t.dialogChangevisible=!0}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.delectitem(e.row.materialid)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"WarehousingManagement-block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,layout:"total, prev, pager, next, jumper",total:t.userList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var l=a("C7Lr")(i,r,!1,function(t){a("vFIg")},null,null);e.default=l.exports},vFIg:function(t,e){}});
//# sourceMappingURL=27.04f5d28e265d1be421e6.js.map
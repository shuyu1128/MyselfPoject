webpackJsonp([25],{"5UBh":function(e,t){},u14N:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){return{dialogTableVisible:!1,tabledata:[{}],xqdata:[{}],zidongtime:"",value:"",Company:"",options:[{label:"分钟",value:"minute"},{label:"小时",value:"hour"},{label:"天",value:"day"}]}},created:function(){var e=this;this.$ajax.post("/selfExamination/getSelfExaminationTasksettings").then(function(t){t.data.forEach(function(t){"person"==t.type&&(e.Company=t.unit,e.zidongtime=t.beigintime,e.value=t.cycle)})}),this.select()},methods:{select:function(){var e=this;this.$ajax.post("/selfExamination/getPersonSelfExaminationP").then(function(t){e.tabledata=t.data})},consoletim:function(){var e=this;if(""!=this.value){var t=new Date;t.setTime(this.zidongtime);var a=t.getMonth()+1,l=t.getDate();a>=1&&a<=9&&(a="0"+a),l>=0&&l<=9&&(l="0"+l);var n=t.getFullYear()+"-"+a+"-"+l+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();console.log(this.zidongtime,this.value,this.Company),this.$ajax.post("/selfExamination/insertSelfExamination","beginTime="+n+"&cycle="+this.value+"&unit="+this.Company+"&type=person").then(function(t){"success"==t.data?e.$message({message:"设置成功",type:"success"}):e.$message.error("设置失败"),console.log(t.data)})}else this.$message.warning("请输入完整！")},Manual:function(){var e=this;this.$ajax.post("/selfExamination/getPersonSelfExamination").then(function(t){"success"==t.data?(e.$message({message:"正在检查，请稍后...",type:"success"}),e.select()):e.$message.error("检查失败")})},handleClick:function(e){var t=this;this.$ajax.post("/selfExamination/getSelfExaminationSByPId","pid="+e).then(function(e){t.xqdata=e.data}),this.dialogTableVisible=!0}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"v-step1"},[a("span",[e._v("设置开始时间：")]),e._v(" "),a("el-date-picker",{staticStyle:{"margin-right":"20px",width:"195px"},attrs:{editable:!1,clearable:!1,type:"datetime",placeholder:"选择日期时间"},model:{value:e.zidongtime,callback:function(t){e.zidongtime=t},expression:"zidongtime"}}),e._v(" "),a("span",[e._v("设置点名周期：")]),e._v(" "),a("el-input",{staticStyle:{width:"80px"},attrs:{placeholder:"请输入数值"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),a("el-select",{staticStyle:{width:"86px"},attrs:{placeholder:"单位"},model:{value:e.Company,callback:function(t){e.Company=t},expression:"Company"}},e._l(e.options,function(e){return a("el-option",{key:e.label1,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.consoletim}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Manual}},[e._v("手动点名")])],1),e._v(" "),a("el-table",{staticClass:"v-step2",staticStyle:{width:"785px","margin-top":"20px"},attrs:{data:e.tabledata,height:"662",border:""}},[a("el-table-column",{attrs:{align:"center",prop:"begintime",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"endtime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"abnormalnum",label:"异常个数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleClick(t.row.id)}}},[e._v("详情")])]}}])},[a("template",{slot:"header"},[a("el-button",{attrs:{type:"text"},on:{click:e.select}},[e._v("刷新")])],1)],2)],1),e._v(" "),a("el-dialog",{attrs:{title:"详情",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{height:"241",border:"",data:e.xqdata}},[a("el-table-column",{attrs:{align:"center",property:"dataname",label:"姓名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",property:"datacode",label:"住院号",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",property:"abnormal",label:"异常码"}})],1)],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(l,n,!1,function(e){a("5UBh")},"data-v-51e48c4c",null);t.default=i.exports}});
//# sourceMappingURL=25.bac9bcb0d6b4df214a7d.js.map